<button id="open_sp">Abrir widget</button>
<script src="../widget/widget.js"></script> <!--  IMPORTANTE -->
<script>
  // Asumiendo que el snippet del widget ya fue cargado antes
  window.SuperPayment = window.SuperPayment || {};

  // Implementar funci贸n que devuelve info del pedido para enviar al backend
  window.SuperPayment.getOrderData = function(){
    // ejemplo: extraer del DOM o variable JS del checkout
    return {
      order_id: document.getElementById('order-id')?.value || 'ORDER-' + Date.now(),//document.getElementById('order-id')?.value || 'ORDER123',
      order_value: document.getElementById('order-total')?.value || (Math.random() * (200 - 10) + 10).toFixed(2)
    };
  };

  // Callback en el host para manejar eventos (autorizado/denegado)
  window.SuperPayment.onEvent = function(event, payload){
    console.log('SuperPayment event', event, payload);
    if (event === 'authorized') {
      // mostrar confirmaci贸n al usuario
      document.getElementById('checkout-result').innerText = 'Pago autorizado con SuperPayment';
      // Aqu铆 el host podr铆a crear la orden como pagada, redirigir a confirmaci贸n, etc.
    }
    if (event === 'denied') {
      document.getElementById('checkout-result').innerText = 'Cup贸n inv谩lido';
    }
  };

  document.getElementById('open_sp').addEventListener('click', function(){
    if (window.SuperPayment && typeof window.SuperPayment.open === 'function') {
      window.SuperPayment.open();
    } else {
      alert('Widget no cargado');
    }
  });
</script>
<div id="checkout-result"></div>
